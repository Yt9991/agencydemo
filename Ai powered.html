<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Property Media Generator</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
<style>
  body {
    background: #f0f2f5;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    padding-bottom: 60px;
  }
  h2 {
    color: #0d6efd;
    margin: 30px 0 20px;
    font-weight: 700;
    text-align: center;
  }
  .media-section {
    background: white;
    border-radius: 10px;
    box-shadow: 0 3px 10px rgb(0 0 0 / 0.1);
    padding: 20px;
    margin-bottom: 30px;
  }
  .watermark {
    position: absolute;
    top: 10px;
    left: 10px;
    font-weight: 700;
    font-size: 18px;
    color: rgba(255,255,255,0.8);
    background: rgba(0,0,0,0.4);
    padding: 5px 10px;
    border-radius: 4px;
    pointer-events: none;
    user-select: none;
  }
  .image-wrapper {
    position: relative;
    display: inline-block;
    margin: 10px;
    max-width: 220px;
    max-height: 160px;
    overflow: hidden;
    border-radius: 8px;
    box-shadow: 0 1px 6px rgb(0 0 0 / 0.1);
  }
  .image-wrapper img {
    max-width: 100%;
    height: auto;
    display: block;
    border-radius: 8px;
  }
  .avatar {
    max-width: 140px;
    border-radius: 50%;
    box-shadow: 0 2px 8px rgb(0 0 0 / 0.2);
    margin: 10px;
  }
</style>
</head>
<body>

<div class="container">

  <h2>Property Video & Photo Auto Generator</h2>

  <div class="media-section">
    <h5>Upload Photos / Videos</h5>
    <input type="file" id="mediaUpload" accept="image/*,video/*" multiple class="form-control mb-3" />
    <div id="mediaPreview" class="d-flex flex-wrap"></div>
    <button class="btn btn-primary mt-2" onclick="addWatermark()">Add Watermark</button>
    <button class="btn btn-secondary mt-2 ms-2" onclick="removeWatermark()">Remove Watermark</button>
  </div>

  <div class="media-section">
    <h5>AI Avatar / Spokesperson Generator</h5>
    <p>Simulated avatars generated by AI for property promotion.</p>
    <div id="avatarContainer" class="d-flex flex-wrap justify-content-center">
      <!-- Demo static avatars -->
      <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Avatar 1" class="avatar" />
      <img src="https://randomuser.me/api/portraits/men/46.jpg" alt="Avatar 2" class="avatar" />
      <img src="https://randomuser.me/api/portraits/women/65.jpg" alt="Avatar 3" class="avatar" />
    </div>
    <button class="btn btn-success mt-3" onclick="generateAvatar()">Generate New Avatar</button>
  </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  const mediaPreview = document.getElementById('mediaPreview');
  let watermarkAdded = false;

  document.getElementById('mediaUpload').addEventListener('change', (event) => {
    mediaPreview.innerHTML = '';
    watermarkAdded = false;
    const files = event.target.files;
    if (!files.length) return;

    Array.from(files).forEach(file => {
      const wrapper = document.createElement('div');
      wrapper.classList.add('image-wrapper');

      if(file.type.startsWith('image/')) {
        const img = document.createElement('img');
        img.src = URL.createObjectURL(file);
        img.alt = file.name;
        wrapper.appendChild(img);
      } else if(file.type.startsWith('video/')) {
        const video = document.createElement('video');
        video.src = URL.createObjectURL(file);
        video.controls = true;
        video.style.maxWidth = '220px';
        video.style.borderRadius = '8px';
        wrapper.appendChild(video);
      }

      mediaPreview.appendChild(wrapper);
    });
  });

  function addWatermark() {
    if (watermarkAdded) return alert('Watermark already added.');
    const wrappers = mediaPreview.querySelectorAll('.image-wrapper');
    if (!wrappers.length) return alert('No media to watermark.');

    wrappers.forEach(wrapper => {
      if (!wrapper.querySelector('.watermark')) {
        const watermark = document.createElement('div');
        watermark.className = 'watermark';
        watermark.textContent = 'Demo Watermark';
        wrapper.appendChild(watermark);
      }
    });
    watermarkAdded = true;
  }

  function removeWatermark() {
    const marks = mediaPreview.querySelectorAll('.watermark');
    marks.forEach(mark => mark.remove());
    watermarkAdded = false;
  }

  function generateAvatar() {
    // For demo, just randomize one avatar from randomuser.me
    const gender = Math.random() > 0.5 ? 'men' : 'women';
    const id = Math.floor(Math.random() * 99) + 1;
    const url = `https://randomuser.me/api/portraits/${gender}/${id}.jpg`;

    const img = document.createElement('img');
    img.src = url;
    img.alt = 'AI Avatar';
    img.className = 'avatar';

    const container = document.getElementById('avatarContainer');
    container.appendChild(img);
  }
</script>

</body>
</html>
